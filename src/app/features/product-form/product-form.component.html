<card>
  <form
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    class="product-form"
    role="form"
    [attr.aria-labelledby]="'form-title'"
    data-testid="product-form"
  >
    <h2 id="form-title" class="sr-only">Formulario de Registro de Producto</h2>
    <div class="form-group">
      <label for="id" class="form-label">
        ID del Producto <span class="danger">*</span>
      </label>
      <input
        type="text"
        id="id"
        formControlName="id"
        class="form-input"
        [class.submitted]="submitted()"
        placeholder="Ingrese el ID del producto"
        data-testid="product-id-input"
      >
      @let fId = f['id']!;
      @if(fId.invalid && submitted()){
        <div class="error-message" role="alert" aria-live="polite">
          @for(error of fId.errors | keyvalue; track 'fId-'+error.key){
            <span>{{ getVmMessage('id', error.key) }}</span>
          }
        </div>
      }
    </div>

    <div class="form-group">
      <label for="name" class="form-label">
        Nombre del Producto <span class="danger">*</span>
      </label>
      <input
        type="text"
        id="name"
        formControlName="name"
        class="form-input"
        [class.submitted]="submitted()"
        placeholder="Ingrese el nombre del producto"
        data-testid="product-name-input"
      >
      @let fName = f['name']!;
      @if(fName.invalid && submitted()){
        <div class="error-message" role="alert" aria-live="polite">
          @for(error of fName.errors | keyvalue; track 'fName-'+error.key){
            <span>{{ getVmMessage('name', error.key) }}</span>
          }
        </div>
      }
    </div>

    <div class="form-group">
      <label for="description" class="form-label">
        Descripci贸n <span class="danger">*</span>
      </label>
      <textarea
        id="description"
        formControlName="description"
        class="form-textarea"
        placeholder="Ingrese la descripci贸n del producto"
        rows="4"
        data-testid="product-description-input"
      ></textarea>
      @let fDescription = f['description']!;
      @if(fDescription.invalid && submitted()){
        <div class="error-message" role="alert" aria-live="polite">
          @for(error of fDescription.errors | keyvalue; track 'fDescription-'+error.key){
            <span>{{ getVmMessage('description', error.key) }}</span>
          }
        </div>
      }
    </div>

    <div class="form-group">
      <label for="logo" class="form-label">
        Logo <span class="danger">*</span>
      </label>
      <input
        type="url"
        id="logo"
        formControlName="logo"
        class="form-input"
        placeholder="logo.png"
        data-testid="product-logo-input"
      >
      @let fLogo = f['logo']!;
      @if(fLogo.invalid && submitted()){
        <div class="error-message" role="alert" aria-live="polite">
          @for(error of fLogo.errors | keyvalue; track 'fLogo-'+error.key){
            <span>{{ getVmMessage('logo', error.key) }}</span>
          }
        </div>
      }
    </div>

    <div class="form-group">
      <label for="releaseDate" class="form-label">
        Fecha de Liberaci贸n <span class="danger">*</span>
      </label>
      <input
        type="date"
        id="releaseDate"
        formControlName="releaseDate"
        class="form-input"
        [min]="currentDate"
        data-testid="product-release-date-input"
      >
      @let frd = f['releaseDate']!;
      @if(frd.invalid && submitted()){
        <div class="error-message" role="alert" aria-live="polite">
          @for(error of frd.errors | keyvalue; track 'frd-'+error.key){
            <span>{{ getVmMessage('releaseDate', error.key) }}</span>
          }
        </div>
      }
    </div>

    <div class="form-group">
      <label for="reviewDate" class="form-label">Fecha de Revisi贸n</label>
      <input
        type="date"
        id="reviewDate"
        formControlName="reviewDate"
        class="form-input"
        data-testid="product-review-date-input"
      >
    </div>

    <hr>

    <div class="form-actions">
      <button
        ui-button
        type="button"
        variant="danger"
        size="large"
        [disabled]="isLoading()"
        (click)="onCancel()"
        data-testid="cancel-button"
      >
        Cancelar
      </button>
      <button
        ui-button
        type="button"
        variant="secondary"
        size="large"
        [disabled]="isLoading()"
        (click)="onReset()"
        data-testid="reset-button"
      >
        Limpiar
      </button>
      <button
        ui-button
        type="submit"
        variant="primary"
        size="large"
        [disabled]="isLoading()"
        data-testid="submit-button"
      >
        {{ isLoading() ? 'Guardando...' : 'Guardar' }}
      </button>
    </div>
  </form>
</card>
